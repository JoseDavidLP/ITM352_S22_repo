<!-- 
Jose Pangelinan
Assignment 2
Update information page, allows for users to update their password to keep their account secured
-->

<!DOCTYPE html>

<!--https://mdbootstrap.com/docs/standard/extended/login/#section-4 login template -->
<script src="/user_data.js" type="json"></script>
<script src="/products.js" type="text/javascript"></script>
<script src="./functions.js"></script>
<script>
  window.onload = function () {
    let params = (new URL(document.location)).searchParams;
    //borrowed from Tiffany Young
   if (params.has('email')) { //params searches 'email' and changes the email value textbox to the email entered
        email.value = params.get('email') //sticky
      }
      if (params.has('reseterrors')) {
      var errors = JSON.parse(params.get('reseterrors'));
      let err_str = '';
      for (err in errors) {
        err_str += errors[err] + '\n';
        document.getElementById(`${err}_label`).innerHTML = `<font color="red">${errors[err]}</font>`;
      }
      alert(err_str);
  }
}
</script>
<html lang="en">


<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- link to stylesheet-->


  <link rel="stylesheet" href="./login.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <title>Update User Info</title>
</head>

<body>
  <!-- Website Logo -->
  <div class="homepageLogo">
    <a href="./index.html">
        <img src="whiskeyphotos/whiskeyheader.jpg" width="100%"></img>
    </a>
</div>
<br>
 
<!-- Website Tagline -->
<div class="tagline">
    <i>Taste the Water of Life</i>
</div>
<!-- simple design for update info page (same as registration)-->
<center>
 
  
              <div class="login">
                
                <form name="newpw" action="./newpw" method="POST">
                
                <h2 class="fw-bold mb-2 text-uppercase">Edit your Password</h2>
                <p class="text-white-50 mb-5">Please enter your email and password!</p>

                
                  <input placeholder="Email" type="email" name="email" id="email" class="form-outline mb-4" />
                  <label class="form-label" id="email_label" for="email"></label>
                

                
                  <input placeholder="Password" type="password" name="password" id="password" class="form-outline mb-4" />
                  <label class="form-label" id="password_label" for="password"></label>
               

                
                  <input placeholder="New Password Here" type="password" name="newpassword" id="newpassword" class="form-outline mb-4" />
                  <label class="form-label" id="newpassword_label" for="newpassword"></label>
               

                
                  <input placeholder="Repeat New Password" type="password" name="repeatnewpassword" id="repeatnewpassword"
                    class="form-outline mb-4" />
                  <label class="form-label" id="repeatnewpassword_label" for="repeatnewpassword"></label>
                
                <!-- button to change password-->
                <div class="form-outline mb-4">
                    <p class="submit"><input type="submit" name="change_password" value="change password"></p>
                </div>
              </div>
                <!-- link to redirect to registration page is user has no account-->
              <div>
                <p class="mb-0">Don't have an account? <a href="registration.html" class="text-white-50 fw-bold">Sign Up</a>
                </p>
              </div>
              </form>
    </div>

</center>
</body>
<footer>
  Copywrite 2022 WaterOfLife international Corporation
</footer>
</div>

</html>